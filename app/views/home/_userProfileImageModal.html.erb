<!-- Modal Structure -->
  <div class="ui modal" id="userProfileImageUploaderContent">
    <div class="modal_title">
      <i class="close icon"></i>
        <h1 class="ui header">수정하기</h1>
            <%= form_tag('/home/timeline/profile_img_upload/' + @user.id.to_s, :method => 'POST', :multipart => true) do %>
            <div class="image content">
              <div class="ui medium image">
                <!--<img src="/images/test1.jpg">-->
                <input value="<%= @user.profile_img %>" name="profile_img" type="file" id="file" accept="image/*" onchange="getThumbnail(this,$('.imagePreview'))">
                <div id="image"><img class="image imagePreview" src="<%= @user.profile_img %>"></div>
                <!--<input type="file" name="mission_multimedia" accept="image/*">-->
              </div>
            </div>
            
            <div class="actions">
              <!--<div class="ui black deny button">-->
              <!--  취소-->
              <!--</div>-->
            
                <button class="ui positive right labeled icon button">
                  프로필 사진 바꾸기
                  <i class="check icon"></i>
                </button>

            </div>
          <% end %>
        </div>
      </div>


<script>
$(document).ready(function(){
  $('#userProfileImageUploader').click(function(){
    $('#userProfileImageUploaderContent').modal('show');
  });
});
</script>



<!--edit_view-->

  
  
<script type="text/javascript">
    /**
     * 이미지 썸네일을 불러오는 function
     * @param html : input 필드의 dom을 인자로 받는다. 물론 타입은 file
     * @param $target : 불러온 이미지를 적용할 jquery 객체.
     **/
    function getThumbnail(html, $target) {
       if (html.files && html.files[0]) {
           var reader = new FileReader();
           reader.onload = function (e) {
            //   $target.html('<img class="image" src="'+ e.target.result + '"/>')
                $target.attr('src', e.target.result);
           }
           reader.readAsDataURL(html.files[0]);
       }
    }
</script>


